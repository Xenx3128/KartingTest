@page
@model TestMVC.Pages.AccModel
@using TestMVC.Models
@using Microsoft.AspNetCore.Identity
@inject UserManager<ApplicationUser> UserManager
@{
    Layout = "_AccountLayout";
    var user = await UserManager.GetUserAsync(User);
}




<div class="content-panel">
    <h4 class="red-heading">Аккаунт</h4>
    <div class="profile-user-info">
        <div class="profile-info-row">
            <div class="profile-info-name"> Имя </div>

            <div class="profile-info-value">
                <span>@user.FullName</span>
            </div>
        </div>

        <div class="profile-info-row">
            <div class="profile-info-name"> Электронная почта </div>

            <div class="profile-info-value">
                <span>@user.Email</span>
            </div>
        </div>

        <div class="profile-info-row">
            <div class="profile-info-name"> Номер телефона </div>

            <div class="profile-info-value">
                <span>@(user.PhoneNumber ?? "Не указан")</span>
            </div>
        </div>

        <div class="profile-info-row">
            <div class="profile-info-name"> День рождения </div>

            <div class="profile-info-value">
                <span>@user.BirthDate.ToString("yyyy/MM/dd")</span>
            </div>
        </div>

        <div class="profile-info-row"></div>
            <div class="profile-info-name">Статус аккаунта</div>
            <div class="profile-info-value">
                @if (user.LockoutEnd?.DateTime > DateTime.Now)
                {
                    <span class="text-danger">Заблокирован до @user.LockoutEnd?.DateTime.ToString("yyyy/MM/dd")</span>
                }
                else
                {
                    <span class="text-success">Активен</span>
                }
            </div>
        </div>

        <div class="profile-info-row"></div>
            <div class="profile-info-name">Дата регистрации</div>
            <div class="profile-info-value">
                <span>@user.RegistrationDate.ToString("yyyy/MM/dd")</span>
            </div>
        </div>

    </div>
</div>


<link rel="stylesheet" href="~/css/account.css">


@section Scripts{
    <script type="module" src='@Url.Content("~/js/registration.js")'></script>
    <script>
        var menu_link = document.getElementById("acc-menu-link-1");
        menu_link.classList.add("active");
    </script>

}
